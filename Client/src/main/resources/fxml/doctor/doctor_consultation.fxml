<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.hospital_management.client.view.doctor.DoctorConsultationView"
            styleClass="consultation-root">

    <top>
        <HBox styleClass="topbar" alignment="CENTER_LEFT" spacing="16.0">
            <HBox spacing="10.0" alignment="CENTER_LEFT">
                <Label text="+" styleClass="brand-icon" />
                <Label text="Hospital Manager" styleClass="brand-text" />
            </HBox>
            <Region HBox.hgrow="ALWAYS" />
            <Button text="Inapoi" onAction="#onCancelClick" styleClass="secondary-button" />
        </HBox>
    </top>

    <center>
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" styleClass="content-scroll">
            <VBox styleClass="content-root">
                <HBox styleClass="breadcrumbs" spacing="6.0">
                    <Label text="Acasa" styleClass="breadcrumb-link" />
                    <Label text="/" styleClass="breadcrumb-separator" />
                    <Label text="Pacienti" styleClass="breadcrumb-link" />
                    <Label text="/" styleClass="breadcrumb-separator" />
                    <Label fx:id="patientBreadcrumbLabel" text="Ion Popescu" styleClass="breadcrumb-link" />
                    <Label text="/" styleClass="breadcrumb-separator" />
                    <Label text="Consultatie noua" styleClass="breadcrumb-current" />
                </HBox>

                <HBox styleClass="page-header" alignment="CENTER_LEFT" spacing="12.0">
                    <VBox spacing="4.0" HBox.hgrow="ALWAYS">
                        <Label text="Adaugare Fisa Consultatie" styleClass="page-title" />
                        <Label text="Completati detaliile medicale pentru vizita curenta."
                               styleClass="page-subtitle" />
                    </VBox>
                    <HBox spacing="8.0">
                        <Button fx:id="finalizeButton" text="Finalizeaza Consultatia" onAction="#onFinalizeClick"
                                styleClass="primary-button" />
                        <Button text="Anuleaza" onAction="#onCancelClick" styleClass="secondary-button" />
                    </HBox>
                </HBox>

                <HBox styleClass="patient-card" alignment="TOP_LEFT" spacing="16.0">
                    <StackPane styleClass="patient-avatar">
                        <Label fx:id="patientInitialsLabel" text="IP" styleClass="avatar-initials" />
                    </StackPane>
                    <VBox spacing="8.0" HBox.hgrow="ALWAYS">
                        <Label fx:id="patientNameLabel" text="Ion Popescu" styleClass="patient-name" />
                        <GridPane styleClass="patient-details-grid" hgap="16.0" vgap="6.0">
                            <VBox styleClass="detail-block">
                                <Label text="CNP" styleClass="detail-label" />
                                <Label fx:id="patientCnpLabel" text="-" styleClass="detail-value" />
                            </VBox>
                            <VBox styleClass="detail-block" GridPane.columnIndex="1">
                                <Label text="Data nasterii" styleClass="detail-label" />
                                <Label fx:id="patientBirthDateLabel" text="-" styleClass="detail-value" />
                            </VBox>
                            <VBox styleClass="detail-block" GridPane.columnIndex="2">
                                <Label text="Varsta" styleClass="detail-label" />
                                <Label fx:id="patientAgeLabel" text="-" styleClass="detail-value" />
                            </VBox>
                            <VBox styleClass="detail-block" GridPane.columnIndex="3">
                                <Label text="Sex" styleClass="detail-label" />
                                <Label fx:id="patientGenderLabel" text="-" styleClass="detail-value" />
                            </VBox>

                            <VBox styleClass="detail-block" GridPane.rowIndex="1">
                                <Label text="Telefon" styleClass="detail-label" />
                                <Label fx:id="patientPhoneLabel" text="-" styleClass="detail-value" />
                            </VBox>
                            <VBox styleClass="detail-block" GridPane.columnIndex="1" GridPane.rowIndex="1" GridPane.columnSpan="3" GridPane.hgrow="ALWAYS">
                                <Label text="Adresa" styleClass="detail-label" />
                                <Label fx:id="patientAddressLabel" text="-" styleClass="detail-value" wrapText="true" />
                            </VBox>

                            <VBox styleClass="detail-block" GridPane.rowIndex="2">
                                <Label text="Grupa sanguina" styleClass="detail-label" />
                                <Label fx:id="patientBloodTypeLabel" text="-" styleClass="detail-value" />
                            </VBox>
                            <VBox styleClass="detail-block" GridPane.columnIndex="1" GridPane.rowIndex="2">
                                <Label text="Greutate" styleClass="detail-label" />
                                <Label fx:id="patientWeightLabel" text="-" styleClass="detail-value" />
                            </VBox>
                            <VBox styleClass="detail-block" GridPane.columnIndex="2" GridPane.rowIndex="2">
                                <Label text="Inaltime" styleClass="detail-label" />
                                <Label fx:id="patientHeightLabel" text="-" styleClass="detail-value" />
                            </VBox>

                            <VBox styleClass="detail-block" GridPane.rowIndex="3" GridPane.columnSpan="2" GridPane.hgrow="ALWAYS">
                                <Label text="Alergii" styleClass="detail-label" />
                                <Label fx:id="patientAllergiesLabel" text="-" styleClass="detail-value" wrapText="true" />
                            </VBox>
                            <VBox styleClass="detail-block" GridPane.columnIndex="2" GridPane.rowIndex="3" GridPane.columnSpan="2" GridPane.hgrow="ALWAYS">
                                <Label text="Afectiuni" styleClass="detail-label" />
                                <Label fx:id="patientConditionsLabel" text="-" styleClass="detail-value" wrapText="true" />
                            </VBox>
                        </GridPane>
                    </VBox>
                </HBox>

                <HBox styleClass="content-grid" spacing="16.0" alignment="TOP_LEFT">
                    <VBox styleClass="form-column" spacing="16.0" HBox.hgrow="ALWAYS">
                        <VBox styleClass="section-card" spacing="12.0">
                            <HBox styleClass="section-header" alignment="CENTER_LEFT" spacing="8.0">
                                <Label text="+" styleClass="section-icon" />
                                <Label text="Detalii Vizita" styleClass="section-title" />
                            </HBox>
                            <VBox spacing="12.0">
                                <HBox spacing="12.0">
                                    <VBox spacing="6.0" HBox.hgrow="ALWAYS">
                                        <Label text="Data Consultatiei" styleClass="field-label" />
                                        <DatePicker fx:id="visitDatePicker" styleClass="field-control" />
                                    </VBox>
                                    <VBox spacing="6.0" HBox.hgrow="ALWAYS">
                                        <Label text="Tip Consultatie" styleClass="field-label" />
                                        <ComboBox fx:id="visitTypeCombo" styleClass="field-control" />
                                    </VBox>
                                </HBox>
                                <VBox spacing="6.0">
                                    <Label text="Motivul Prezentarii" styleClass="field-label" />
                                    <TextField fx:id="visitReasonField"
                                               promptText="Ex: Dureri abdominale acute..."
                                               styleClass="field-control" />
                                </VBox>
                            </VBox>
                        </VBox>

                        <VBox styleClass="section-card" spacing="12.0">
                            <HBox styleClass="section-header" alignment="CENTER_LEFT" spacing="8.0">
                                <Label text="+" styleClass="section-icon" />
                                <Label text="Diagnostic" styleClass="section-title" />
                            </HBox>
                            <VBox spacing="10.0">
                                <VBox spacing="6.0">
                                    <Label text="Cod ICD-10" styleClass="field-label" />
                                    <TextField fx:id="icdField"
                                               promptText="Cauta cod boala (ex: J00)..."
                                               styleClass="field-control" />
                                </VBox>
                                <VBox spacing="6.0">
                                    <Label text="Diagnostic Principal" styleClass="field-label" />
                                    <TextArea fx:id="primaryDiagnosisArea" styleClass="field-area" prefRowCount="2" />
                                </VBox>
                                <VBox spacing="6.0">
                                    <Label text="Diagnostic Secundar" styleClass="field-label" />
                                    <TextArea fx:id="secondaryDiagnosisArea" styleClass="field-area" prefRowCount="2" />
                                </VBox>
                            </VBox>
                        </VBox>

                        <VBox styleClass="section-card" spacing="12.0">
                            <HBox styleClass="section-header" alignment="CENTER_LEFT" spacing="8.0">
                                <Label text="+" styleClass="section-icon" />
                                <Label text="Plan Tratament" styleClass="section-title" />
                                <Region HBox.hgrow="ALWAYS" />
                                <Button text="Adauga Medicament" onAction="#onAddMedicineClick" styleClass="link-button" />
                            </HBox>
                            <VBox spacing="8.0">
                                <HBox styleClass="medicine-header" spacing="10.0">
                                    <Label text="Medicament" styleClass="medicine-header-label" HBox.hgrow="ALWAYS" />
                                    <Label text="Dozaj" styleClass="medicine-header-label" prefWidth="120.0" />
                                    <Label text="Durata" styleClass="medicine-header-label" prefWidth="140.0" />
                                    <Label text="" styleClass="medicine-header-label" prefWidth="40.0" />
                                </HBox>
                                <VBox fx:id="medicinesContainer" spacing="8.0" />
                                <VBox spacing="6.0">
                                    <Label text="Instructiuni Suplimentare" styleClass="field-label" />
                                    <TextArea fx:id="instructionsArea" styleClass="field-area" prefRowCount="2"
                                              promptText="Ex: A se lua dupa masa..." />
                                </VBox>
                            </VBox>
                        </VBox>

                        <VBox styleClass="section-card" spacing="12.0">
                            <HBox styleClass="section-header" alignment="CENTER_LEFT" spacing="8.0">
                                <Label text="+" styleClass="section-icon" />
                                <Label text="Observatii Medicale" styleClass="section-title" />
                            </HBox>
                            <VBox spacing="6.0">
                                <Label text="Anamneza si Examen Obiectiv" styleClass="field-label" />
                                <TextArea fx:id="observationsArea" styleClass="field-area" prefRowCount="6"
                                          promptText="Descrieti starea pacientului, simptomele observate si alte detalii..." />
                            </VBox>
                        </VBox>
                    </VBox>

                </HBox>

                <Label fx:id="statusLabel" text="" styleClass="status-message" />
            </VBox>
        </ScrollPane>
    </center>
</BorderPane>
