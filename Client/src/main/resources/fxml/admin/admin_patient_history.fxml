<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="view.admin.AdminPatientHistoryView"
            style="-fx-background-color: #f4f6f8;">

    <top>
        <VBox style="-fx-background-color: white; -fx-padding: 15; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 1);">
            <HBox alignment="CENTER_LEFT" spacing="15">
                <Button text="← Înapoi la Dashboard" onAction="#onBackClick"
                        style="-fx-background-color: transparent; -fx-text-fill: #666; -fx-cursor: hand; -fx-border-color: #ddd; -fx-border-radius: 4;"/>

                <Separator orientation="VERTICAL"/>

                <VBox>
                    <Label fx:id="patientNameLabel" text="Nume Pacient" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                    <HBox spacing="10">
                        <Label fx:id="cnpLabel" text="CNP: -" style="-fx-text-fill: gray;"/>
                        <Label fx:id="ageLabel" text="Vârstă: -" style="-fx-text-fill: gray;"/>
                    </HBox>
                </VBox>

                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="statusLabel" text=""/>
            </HBox>
        </VBox>
    </top>

    <center>
        <SplitPane dividerPositions="0.6" style="-fx-background-color: transparent; -fx-padding: 20;">

            <VBox spacing="15">
                <VBox spacing="5" VBox.vgrow="ALWAYS" style="-fx-background-color: white; -fx-padding: 10; -fx-background-radius: 5;">
                    <Label text="Istoric Fișe Medicale" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                    <TableView fx:id="historyTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="dateCol" text="Data" prefWidth="120"/>
                            <TableColumn fx:id="doctorCol" text="Medic" prefWidth="150"/>
                            <TableColumn fx:id="diagnosisCol" text="Diagnostic" prefWidth="200"/>
                        </columns>
                        <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                        <placeholder><Label text="Nu există fișe medicale."/></placeholder>
                    </TableView>
                </VBox>

                <VBox spacing="5" VBox.vgrow="ALWAYS" style="-fx-background-color: white; -fx-padding: 10; -fx-background-radius: 5;">
                    <Label text="Istoric Programări" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                    <TableView fx:id="appointmentsTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="appDateCol" text="Data" prefWidth="100"/>
                            <TableColumn fx:id="appServiceCol" text="Serviciu" prefWidth="150"/>
                            <TableColumn fx:id="appStatusCol" text="Status" prefWidth="100"/>
                        </columns>
                        <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                    </TableView>
                </VBox>
            </VBox>

            <VBox spacing="15">
                <VBox spacing="5" VBox.vgrow="ALWAYS" style="-fx-background-color: white; -fx-padding: 10; -fx-background-radius: 5;">
                    <Label text="Detalii Fișă Selectată" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                    <TextArea fx:id="detailsArea" editable="false" wrapText="true" VBox.vgrow="ALWAYS"
                              promptText="Selectează o fișă din stânga pentru a vedea detaliile..."/>
                </VBox>

                <VBox spacing="10" style="-fx-background-color: #e3f2fd; -fx-padding: 15; -fx-background-radius: 5; -fx-border-color: #90caf9;">
                    <Label text="Adaugă Fișă (Admin Override)" style="-fx-font-weight: bold; -fx-text-fill: #1565c0;"/>
                    <TextField fx:id="newDiagnosisField" promptText="Diagnostic..."/>
                    <TextArea fx:id="newTreatmentArea" promptText="Tratament..." prefHeight="80" wrapText="true"/>
                    <Button text="Salvează Fișa" onAction="#onAddRecordClick" maxWidth="Infinity"
                            style="-fx-background-color: #1976d2; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;"/>
                </VBox>
            </VBox>

        </SplitPane>
    </center>
</BorderPane>